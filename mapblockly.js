var mb;(()=>{var __webpack_modules__={624:()=>{Blockly.defineBlocksWithJsonArray([{type:"map",message0:"Create new Map",message1:"Set Style %1",message2:"Add Sources %1 Add Layers %2",colour:200,tooltip:"Create a new Map",args1:[{type:"input_statement",name:"style"}],args2:[{type:"input_statement",name:"source"},{type:"input_statement",name:"layer"}]},{type:"style",message0:"Create new Style \n Set Glyphs %1",message1:"Add Sources : %1",message2:"Add Layers : %1",output:"source",colour:200,args0:[{type:"input_value",name:"ref"}],args1:[{type:"input_statement",name:"source"}],args2:[{type:"input_statement",name:"layer"}],previousStatement:null},{type:"glyphESRI",message0:"ESRI Glyphs",output:"glyphs",colour:200,tooltip:"ESRI Glyphs"},{type:"styleDemo",message0:"Demo Style",output:"style",colour:200,tooltip:"Demo Style",previousStatement:null},{type:"source",message0:"Create new Source \n ID : %1",message1:"Specs : %1",output:"source",colour:200,args0:[{type:"field_input",name:"name"}],args1:[{type:"input_statement",name:"value"}],previousStatement:null,nextStatement:null},{type:"sourceOSM",message0:"OSM Specs",output:"source",colour:200,tooltip:"OSM Raster Tiles",previousStatement:null},{type:"sourceESRISat",message0:"ESRI Satellite Specs",output:"source",colour:200,tooltip:"ESRI Statellite Tiles",previousStatement:null},{type:"sourceESRI",message0:"ESRI Specs",output:"source",colour:200,tooltip:"ESRI Vector Tiles",previousStatement:null},{type:"layer",message0:"Create new Layer \n Type: %1",message1:"Source ID: %1",output:"layer",colour:200,tooltip:"Create a new Layer",args0:[{type:"field_dropdown",name:"sourceType",options:[["Raster","raster"]]}],args1:[{type:"field_input",name:"source"}],previousStatement:null,nextStatement:null},{type:"layerESRIVector",message0:"ESRI Vector Layers",output:"layer",colour:200,tooltip:"ESRI Vector Layers",previousStatement:null},{type:"layerESRIHybrid",message0:"ESRI Hybrid Layers",output:"layer",colour:200,tooltip:"ESRI Hybrid Layers",previousStatement:null}])},979:()=>{javascript.javascriptGenerator.forBlock.sourceOSM=function(e,t){return["{\n\t\t'type': 'raster',\n\t\t'tiles': ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],\n\t\t'tileSize': 256,\n\t\t'minzoom': 1,\n\t\t\"attribution\" : 'Â© Tiles <a href=\"https://openstreetmap.org\">OpenStreetMap</a>'\n\t};\n\t",javascript.Order.ATOMIC]},javascript.javascriptGenerator.forBlock.sourceESRISat=function(e,t){return["{\n\t\t'type': 'raster',\n\t\t'tiles': ['https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'],\n\t\t'tileSize': 256,\n\t\t'minzoom': 1,\n\t\t\"attribution\" : 'Source <a href=\"https://esri.com\">Esri</a>'\n\t};\n\t",javascript.Order.ATOMIC]},javascript.javascriptGenerator.forBlock.sourceESRI=function(e,t){return['{\n\t\t"type": "vector",\n\t\t"tiles": [ \'https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/tile/{z}/{y}/{x}.pbf\' ],\n\t\t"minzoom": 1,\n\t\t"attribution" : \'Source <a href="https://esri.com">Esri</a>\'\n\t}\n\t',javascript.Order.ATOMIC]},javascript.javascriptGenerator.forBlock.source=function(e,t){var r="",a=e.getFieldValue("name"),o=t.valueToCode(e,"value",javascript.Order.ATOMIC);return o&&(r=r+"\n\tvar "+a+" = "+o,"map"==e.getParent().type||"source"==e.getParent().type?r=r+"\n\tmap.addSource('"+a+"',"+a+");\n\t\t":"style"==e.getParent().type&&(r=r+"\n\tstyle.sources['"+a+"'] = "+a+";\n\t")),r},javascript.javascriptGenerator.forBlock.layer=function(e,t){var r="",a=e.getFieldValue("sourceType"),o=e.getFieldValue("source");return o&&("map"==e.getParent().type||"source"==e.getParent().type?r=r+"\n\tmap.addLayer({'id': '"+a+"-"+o+"', 'type': '"+a+"', 'source': '"+o+"' });\n\t\t":"style"==e.getParent().type&&(r=r+"\n\tstyle.layers.push({'id': '"+a+"-"+o+"', 'type': '"+a+"', 'source': '"+o+"' });\n\t")),r},javascript.javascriptGenerator.forBlock.layerESRIVector=function(e,t){if("map"==e.getParent().type||"source"==e.getParent().type)var r="\n\tesri_vector_layers.forEach(l=> map.addLayer(l));\n\t\t";else"style"==e.getParent().type&&(r="\n\tstyle.layers = esri_vector_layers;\n\t\t");return r},javascript.javascriptGenerator.forBlock.layerESRIHybrid=function(e,t){if("map"==e.getParent().type||"source"==e.getParent().type)var r="\n\tesri_hybrid_layers.forEach(l=> map.addLayer(l));\n\t\t";else"style"==e.getParent().type&&(r="\n\tstyle.layers = esri_hybrid_layers;\n\t\t");return r},javascript.javascriptGenerator.forBlock.glyphESRI=function(e,t){return["'https://basemaps.arcgis.com/arcgis/rest/services/World_Basemap_v2/VectorTileServer/resources/fonts/{fontstack}/{range}.pbf'",javascript.Order.ATOMIC]},javascript.javascriptGenerator.forBlock.style=function(e,t){var r="\n\tvar style = { 'version': 8, 'center': [0, 0], 'zoom': 1, 'sources': {}, 'layers' : [] };\n\t",a=e.getFieldValue("url");a||(a=t.valueToCode(e,"ref",javascript.Order.ATOMIC)),a&&(r=r+"style.glyphs = "+a+";");var o=t.statementToCode(e,"source",javascript.Order.ATOMIC);o&&(r+=o);var s=t.statementToCode(e,"layer",javascript.Order.ATOMIC);return s&&(r+=s),r},javascript.javascriptGenerator.forBlock.map=function(e,t){var r="\n\tvar mapStyle;\n\t",a=t.statementToCode(e,"style",javascript.Order.ATOMIC);a?(r+=a,r+="\n\tmapStyle = style;\n\t"):r+="\n\tmapStyle = 'https://demotiles.maplibre.org/style.json'; // default style\n\t",r+="\n\tvar map = new maplibregl.Map({\n\t\tcontainer: 'mapDiv', // container id\n\t\tstyle: mapStyle,\n\t\tcenter: [0, 0], // starting position [lng, lat]\n\t\tzoom: 1 // starting zoom\n\t});\n\t";var o=t.statementToCode(e,"source",javascript.Order.ATOMIC),s=t.statementToCode(e,"layer",javascript.Order.ATOMIC);return(o||s)&&(r+="\n\tmap.on('load', function() {\n\t",o&&(r+=o),s&&(r+=s),r+="\n\t});\n\t"),r}},144:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initWorkspace:()=>initWorkspace});var id=window.id||new URLSearchParams(window.location.search).get("id"),WS_NAME="MapBlocklyWS",workspace;function initWorkspace(e){workspace=Blockly.inject("blocklyDiv",e),loadWorkspace(WS_STATES[id]||localStorage.getItem(WS_NAME)||WS_STATES.intro),e&&1!=e.readOnly?workspace.addChangeListener(updateCode):updateCode()}function loadWorkspace(e){if(e)try{Blockly.serialization.workspaces.load(JSON.parse(e),workspace)}catch(e){console.log(e),delete localStorage[WS_NAME]}}const supportedEvents=new Set([Blockly.Events.BLOCK_CHANGE,Blockly.Events.BLOCK_CREATE,Blockly.Events.BLOCK_DELETE,Blockly.Events.BLOCK_MOVE]);function updateCode(event){if(workspace.isDragging())return;if(event&&!supportedEvents.has(event.type))return;var state=Blockly.serialization.workspaces.save(workspace);localStorage.setItem(WS_NAME,JSON.stringify(state));const code=javascript.javascriptGenerator.workspaceToCode(workspace);var mapDiv=document.getElementById("mapDiv");mapDiv&&(mapDiv.innerText="");var codeDiv=document.getElementById("codeDiv");codeDiv&&(codeDiv.innerText=code);try{eval(code)}catch(e){console.log(e)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{openInMI:()=>r}),__webpack_require__(624),__webpack_require__(979);var e=__webpack_require__(144),t="https://mapinventor.github.io/";function r(e){window.open(t+"?id="+e)}window.ws=e})(),mb=__webpack_exports__})();